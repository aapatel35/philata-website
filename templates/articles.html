{% extends "base.html" %}

{% block title %}Articles{% endblock %}

{% block meta %}
<meta name="description" content="Latest Canadian immigration articles, news, and in-depth guides on Express Entry, PNP, Study Permits, Work Permits, and IRCC policy updates.">
<meta name="keywords" content="Canadian immigration articles, Express Entry news, PNP updates, IRCC news, Canada visa guides">
<link rel="canonical" href="https://www.philata.com/articles">
<meta property="og:type" content="website">
<meta property="og:url" content="https://www.philata.com/articles">
<meta property="og:title" content="Immigration Articles - Philata">
<meta property="og:description" content="Latest Canadian immigration articles, news, and in-depth guides.">
{% endblock %}

{% block extra_css %}
<style>
    /* Category Filters */
    .category-filters {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-bottom: 24px;
    }

    .category-btn {
        padding: 8px 16px;
        border-radius: 8px;
        border: 1px solid var(--border);
        background: var(--card);
        color: var(--text-muted);
        font-weight: 500;
        font-size: 13px;
        text-decoration: none;
        transition: all 0.2s ease;
    }

    .category-btn:hover {
        border-color: var(--primary);
        color: var(--text);
    }

    .category-btn.active {
        background: var(--primary);
        border-color: var(--primary);
        color: white;
    }

    /* Articles Grid */
    .articles-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 20px;
    }

    .article-card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 12px;
        overflow: hidden;
        text-decoration: none;
        transition: all 0.2s ease;
        display: flex;
        flex-direction: column;
    }

    .article-card:hover {
        box-shadow: 0 8px 24px rgba(0,0,0,0.08);
        border-color: var(--primary);
    }

    .article-card-body {
        padding: 20px;
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .article-card-meta {
        display: flex;
        gap: 12px;
        margin-bottom: 12px;
        font-size: 12px;
        color: var(--text-muted);
        align-items: center;
    }

    .article-card-category {
        background: var(--accent);
        color: white;
        padding: 4px 10px;
        border-radius: 6px;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
    }

    .article-card-title {
        font-size: 16px;
        font-weight: 600;
        color: var(--text);
        margin-bottom: 8px;
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .article-card-excerpt {
        color: var(--text-muted);
        font-size: 14px;
        line-height: 1.6;
        flex: 1;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .article-card-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 16px;
        padding-top: 16px;
        border-top: 1px solid var(--border);
    }

    .article-card-source {
        font-size: 12px;
        color: var(--text-light);
    }

    .article-card-read {
        color: var(--primary);
        font-weight: 600;
        font-size: 13px;
        display: inline-flex;
        align-items: center;
        gap: 6px;
    }

    .article-card:hover .article-card-read {
        color: var(--accent);
    }

    .no-articles {
        text-align: center;
        padding: 60px 20px;
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 12px;
    }

    .no-articles i {
        font-size: 48px;
        margin-bottom: 16px;
        color: var(--text-light);
    }

    .no-articles h3 {
        color: var(--text);
        margin-bottom: 8px;
    }

    .no-articles p {
        color: var(--text-muted);
    }

    @media (max-width: 576px) {
        .articles-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="page-header">
    <h1 class="page-title">Immigration Articles</h1>
    <p class="page-subtitle">In-depth analysis and comprehensive guides on Canadian immigration</p>
</div>

<!-- Category Filters -->
<div class="category-filters">
    <a href="/articles" class="category-btn {% if not category %}active{% endif %}">All</a>
    <a href="/articles?category=express_entry" class="category-btn {% if category == 'express_entry' %}active{% endif %}">Express Entry</a>
    <a href="/articles?category=pnp" class="category-btn {% if category == 'pnp' %}active{% endif %}">PNP</a>
    <a href="/articles?category=policy" class="category-btn {% if category == 'policy' %}active{% endif %}">Policy</a>
    <a href="/articles?category=forms" class="category-btn {% if category == 'forms' %}active{% endif %}">Forms</a>
    <a href="/articles?category=study_permit" class="category-btn {% if category == 'study_permit' %}active{% endif %}">Study</a>
    <a href="/articles?category=work_permit" class="category-btn {% if category == 'work_permit' %}active{% endif %}">Work</a>
</div>

{% if articles %}
<div class="articles-grid">
    {% for article in articles %}
    <a href="/articles/{{ article.slug or article.id }}" class="article-card">
        <div class="article-card-body">
            <div class="article-card-meta">
                <span class="article-card-category">{{ article.category | replace('_', ' ') | title }}</span>
                <span><i class="bi bi-clock me-1"></i>{{ article.reading_time }} min read</span>
            </div>
            <h2 class="article-card-title">{{ article.title }}</h2>
            <p class="article-card-excerpt">{{ article.full_article | striptags | truncate(200) }}</p>
            <div class="article-card-footer">
                <span class="article-card-source">{{ article.source }}</span>
                <span class="article-card-read">Read More <i class="bi bi-arrow-right"></i></span>
            </div>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="no-articles">
    <i class="bi bi-newspaper"></i>
    <h3>No Articles Yet</h3>
    <p>New articles are being generated. Check back soon!</p>
</div>
{% endif %}
{% endblock %}
