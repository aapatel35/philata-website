{% extends "base.html" %}

{% block title %}Processing Times - Canada Immigration{% endblock %}

{% block extra_css %}
<style>
    /* Page Header */
    .page-header-times {
        margin-bottom: 32px;
    }

    .page-header-times .page-title {
        font-family: 'Plus Jakarta Sans', var(--font-family);
        font-size: 32px;
        font-weight: 800;
        color: var(--text);
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 14px;
    }

    .page-header-times .page-title i {
        font-size: 28px;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .page-subtitle {
        color: var(--text-muted);
        font-size: 1rem;
    }

    /* Last Updated Banner */
    .last-updated {
        background: linear-gradient(135deg, rgba(30, 58, 138, 0.1), rgba(8, 145, 178, 0.1));
        border: 1px solid rgba(30, 58, 138, 0.2);
        border-radius: 12px;
        padding: 1rem 1.5rem;
        margin-bottom: 2rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .last-updated-text {
        display: flex;
        align-items: center;
        gap: 10px;
        color: var(--text);
    }

    .last-updated-text i {
        color: var(--primary);
        font-size: 1.25rem;
    }

    .last-updated-text strong {
        color: var(--primary);
    }

    .source-link {
        font-size: 0.85rem;
        color: var(--accent);
        text-decoration: none;
    }

    .source-link:hover {
        text-decoration: underline;
    }

    /* Category Tabs */
    .category-tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
    }

    .category-tab {
        padding: 0.75rem 1.25rem;
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 10px;
        cursor: pointer;
        font-weight: 500;
        color: var(--text-muted);
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .category-tab:hover {
        border-color: var(--primary);
        color: var(--text);
    }

    .category-tab.active {
        background: var(--gradient-primary);
        color: white;
        border-color: transparent;
    }

    .category-tab i {
        font-size: 1rem;
    }

    /* Timeline Table Container */
    .timeline-container {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 16px;
        overflow: hidden;
        margin-bottom: 2rem;
    }

    .timeline-header {
        background: var(--bg);
        padding: 1.25rem 1.5rem;
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .timeline-header i {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
        color: white;
    }

    .timeline-header h3 {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--text);
    }

    /* Timeline Table */
    .timeline-table {
        width: 100%;
    }

    .timeline-row {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1.5fr;
        padding: 1rem 1.5rem;
        border-bottom: 1px solid var(--border);
        align-items: center;
    }

    .timeline-row:last-child {
        border-bottom: none;
    }

    .timeline-row.header {
        background: var(--bg);
        font-weight: 600;
        color: var(--text-muted);
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .timeline-row:not(.header):hover {
        background: rgba(30, 58, 138, 0.03);
    }

    .visa-type {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    .visa-name {
        font-weight: 600;
        color: var(--text);
    }

    .visa-code {
        font-size: 0.8rem;
        color: var(--text-muted);
    }

    .processing-time {
        font-weight: 700;
        font-size: 1.1rem;
    }

    .time-fast {
        color: #059669;
    }

    .time-moderate {
        color: #D97706;
    }

    .time-slow {
        color: #DC2626;
    }

    .time-unit {
        font-size: 0.85rem;
        font-weight: 500;
        color: var(--text-muted);
    }

    .status-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 500;
    }

    .status-normal {
        background: rgba(16, 185, 129, 0.15);
        color: #059669;
    }

    .status-delayed {
        background: rgba(245, 158, 11, 0.15);
        color: #D97706;
    }

    .status-backlog {
        background: rgba(239, 68, 68, 0.15);
        color: #DC2626;
    }

    /* Progress Bar */
    .progress-container {
        display: flex;
        flex-direction: column;
        gap: 4px;
    }

    .progress-bar {
        height: 8px;
        background: var(--bg);
        border-radius: 4px;
        overflow: hidden;
        border: 1px solid var(--border);
    }

    .progress-fill {
        height: 100%;
        border-radius: 4px;
        transition: width 0.5s ease;
    }

    .progress-fill.fast {
        background: linear-gradient(90deg, #10B981, #059669);
    }

    .progress-fill.moderate {
        background: linear-gradient(90deg, #F59E0B, #D97706);
    }

    .progress-fill.slow {
        background: linear-gradient(90deg, #EF4444, #DC2626);
    }

    .progress-label {
        font-size: 0.75rem;
        color: var(--text-muted);
    }

    /* Info Cards */
    .info-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .info-card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 1.5rem;
    }

    .info-card-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 1rem;
    }

    .info-card-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
    }

    .info-card h4 {
        margin: 0;
        font-size: 1rem;
        font-weight: 600;
        color: var(--text);
    }

    .info-card p {
        margin: 0;
        font-size: 0.9rem;
        color: var(--text-muted);
        line-height: 1.6;
    }

    /* Legend */
    .legend {
        display: flex;
        gap: 2rem;
        flex-wrap: wrap;
        padding: 1rem 1.5rem;
        background: var(--bg);
        border-radius: 12px;
        margin-top: 2rem;
    }

    .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.85rem;
        color: var(--text);
    }

    .legend-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
    }

    .legend-dot.fast { background: #10B981; }
    .legend-dot.moderate { background: #F59E0B; }
    .legend-dot.slow { background: #EF4444; }

    /* Responsive */
    @media (max-width: 768px) {
        .timeline-row {
            grid-template-columns: 1fr;
            gap: 0.75rem;
        }

        .timeline-row.header {
            display: none;
        }

        .timeline-row:not(.header) {
            padding: 1.25rem;
        }

        .visa-type::before,
        .processing-time::before,
        .status-badge::before,
        .progress-container::before {
            display: block;
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .visa-type::before { content: 'Application Type'; }
        .processing-time::before { content: 'Processing Time'; }

        .category-tabs {
            overflow-x: auto;
            flex-wrap: nowrap;
            padding-bottom: 0.5rem;
        }

        .category-tab {
            white-space: nowrap;
        }
    }

    /* Disclaimer */
    .times-disclaimer {
        background: rgba(245, 158, 11, 0.1);
        border: 1px solid rgba(245, 158, 11, 0.3);
        border-radius: 12px;
        padding: 1rem 1.25rem;
        margin-top: 2rem;
        font-size: 0.9rem;
        color: var(--text);
    }

    .times-disclaimer i {
        color: #D97706;
        margin-right: 8px;
    }

    /* Country Processing Times Section */
    .country-section {
        margin-top: 3rem;
    }

    .section-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .section-title i {
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .section-description {
        color: var(--text-muted);
        margin-bottom: 1.5rem;
        font-size: 0.95rem;
    }

    .country-filter {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
    }

    .country-filter-btn {
        padding: 0.5rem 1rem;
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 8px;
        cursor: pointer;
        font-size: 0.85rem;
        color: var(--text-muted);
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .country-filter-btn:hover {
        border-color: var(--primary);
        color: var(--text);
    }

    .country-filter-btn.active {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
    }

    .country-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 1rem;
    }

    .country-card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 14px;
        overflow: hidden;
        transition: all 0.2s ease;
    }

    .country-card:hover {
        border-color: var(--primary);
        transform: translateY(-2px);
    }

    .country-card-header {
        background: var(--bg);
        padding: 1rem 1.25rem;
        display: flex;
        align-items: center;
        gap: 12px;
        border-bottom: 1px solid var(--border);
    }

    .country-flag {
        font-size: 1.75rem;
    }

    .country-name {
        font-weight: 600;
        color: var(--text);
    }

    .country-region {
        font-size: 0.8rem;
        color: var(--text-muted);
    }

    .country-card-body {
        padding: 1rem 1.25rem;
    }

    .visa-time-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.6rem 0;
        border-bottom: 1px solid var(--border);
    }

    .visa-time-row:last-child {
        border-bottom: none;
    }

    .visa-time-label {
        font-size: 0.9rem;
        color: var(--text);
    }

    .visa-time-value {
        font-weight: 600;
        font-size: 0.95rem;
    }

    /* Immigration Stats Section */
    .stats-section {
        margin-top: 3rem;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .stat-card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 1.5rem;
        text-align: center;
    }

    .stat-value {
        font-size: 2rem;
        font-weight: 800;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 0.5rem;
    }

    .stat-label {
        font-size: 0.9rem;
        color: var(--text-muted);
    }

    .stat-sublabel {
        font-size: 0.75rem;
        color: var(--text-muted);
        margin-top: 0.25rem;
    }

    /* Key Dates Section */
    .dates-section {
        margin-top: 3rem;
    }

    .key-dates-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
    }

    .date-card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 1.5rem;
    }

    .date-card-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 1rem;
    }

    .date-icon {
        width: 44px;
        height: 44px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        color: white;
    }

    .date-card h4 {
        margin: 0;
        font-size: 1rem;
        font-weight: 600;
        color: var(--text);
    }

    .date-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .date-list li {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--border);
        font-size: 0.9rem;
    }

    .date-list li:last-child {
        border-bottom: none;
    }

    .date-label {
        color: var(--text-muted);
    }

    .date-value {
        font-weight: 600;
        color: var(--text);
    }

    /* Fee Structure Section */
    .fees-section {
        margin-top: 3rem;
    }

    .fees-table {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 14px;
        overflow: hidden;
    }

    .fees-header {
        background: var(--bg);
        padding: 1rem 1.5rem;
        display: flex;
        align-items: center;
        gap: 12px;
        border-bottom: 1px solid var(--border);
    }

    .fees-header i {
        font-size: 1.5rem;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .fees-header h3 {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 600;
    }

    .fees-row {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        padding: 1rem 1.5rem;
        border-bottom: 1px solid var(--border);
        align-items: center;
    }

    .fees-row:last-child {
        border-bottom: none;
    }

    .fees-row.header {
        background: var(--bg);
        font-weight: 600;
        font-size: 0.8rem;
        text-transform: uppercase;
        color: var(--text-muted);
    }

    .fee-amount {
        font-weight: 600;
        color: var(--primary);
    }

    .fee-type {
        font-size: 0.85rem;
        color: var(--text-muted);
    }

    @media (max-width: 768px) {
        .country-grid {
            grid-template-columns: 1fr;
        }

        .stats-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .fees-row {
            grid-template-columns: 1fr;
            gap: 0.5rem;
        }

        .fees-row.header {
            display: none;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="page-header-times">
    <h1 class="page-title">
        <i class="bi bi-clock-history"></i>
        Processing Times
    </h1>
    <p class="page-subtitle">Estimated processing times for Canadian immigration applications</p>
</div>

<!-- Last Updated Banner -->
<div class="last-updated">
    <div class="last-updated-text">
        <i class="bi bi-calendar-check"></i>
        {% if data and data.last_updated %}
        <span>Last updated: <strong>{{ data.last_updated[:10] }}</strong> - Based on IRCC official data</span>
        {% else %}
        <span>Last updated: <strong>January 10, 2026</strong> - Based on IRCC official data</span>
        {% endif %}
    </div>
    <a href="https://www.canada.ca/en/immigration-refugees-citizenship/services/application/check-processing-times.html" target="_blank" class="source-link">
        View official IRCC processing times <i class="bi bi-box-arrow-up-right"></i>
    </a>
</div>

<!-- Category Tabs -->
<div class="category-tabs">
    <div class="category-tab active" onclick="showCategory('all')">
        <i class="bi bi-grid-3x3-gap"></i>
        All Applications
    </div>
    <div class="category-tab" onclick="showCategory('express')">
        <i class="bi bi-lightning"></i>
        Express Entry
    </div>
    <div class="category-tab" onclick="showCategory('temporary')">
        <i class="bi bi-clock"></i>
        Temporary Visas
    </div>
    <div class="category-tab" onclick="showCategory('family')">
        <i class="bi bi-people"></i>
        Family Sponsorship
    </div>
    <div class="category-tab" onclick="showCategory('pnp')">
        <i class="bi bi-geo-alt"></i>
        PNP Programs
    </div>
</div>

<!-- Express Entry Section -->
<div class="timeline-container category-section" data-category="express all">
    <div class="timeline-header">
        <i style="background: linear-gradient(135deg, #6366F1, #8B5CF6);" class="bi bi-lightning-fill"></i>
        <h3>Express Entry Programs</h3>
    </div>
    <div class="timeline-table">
        <div class="timeline-row header">
            <span>Application Type</span>
            <span>Processing Time</span>
            <span>Status</span>
            <span>Progress</span>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Federal Skilled Worker (FSW)</span>
                <span class="visa-code">Express Entry - IMM 0008</span>
            </div>
            <div>
                <span class="processing-time time-fast">6</span>
                <span class="time-unit">months</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill fast" style="width: 85%"></div>
                </div>
                <span class="progress-label">80% of applications processed in 6 months</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Canadian Experience Class (CEC)</span>
                <span class="visa-code">Express Entry - IMM 0008</span>
            </div>
            <div>
                <span class="processing-time time-fast">5</span>
                <span class="time-unit">months</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill fast" style="width: 90%"></div>
                </div>
                <span class="progress-label">80% of applications processed in 5 months</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Federal Skilled Trades (FST)</span>
                <span class="visa-code">Express Entry - IMM 0008</span>
            </div>
            <div>
                <span class="processing-time time-fast">6</span>
                <span class="time-unit">months</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill fast" style="width: 80%"></div>
                </div>
                <span class="progress-label">80% of applications processed in 6 months</span>
            </div>
        </div>
    </div>
</div>

<!-- Temporary Residence Section -->
<div class="timeline-container category-section" data-category="temporary all">
    <div class="timeline-header">
        <i style="background: linear-gradient(135deg, #0891B2, #06B6D4);" class="bi bi-clock-fill"></i>
        <h3>Temporary Residence</h3>
    </div>
    <div class="timeline-table">
        <div class="timeline-row header">
            <span>Application Type</span>
            <span>Processing Time</span>
            <span>Status</span>
            <span>Progress</span>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Visitor Visa (TRV)</span>
                <span class="visa-code">IMM 5257 - Outside Canada</span>
            </div>
            <div>
                <span class="processing-time time-moderate">45</span>
                <span class="time-unit">days</span>
            </div>
            <span class="status-badge status-delayed"><i class="bi bi-exclamation-circle"></i> Delays</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill moderate" style="width: 60%"></div>
                </div>
                <span class="progress-label">Varies by country of application</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Study Permit</span>
                <span class="visa-code">IMM 1294 - Outside Canada</span>
            </div>
            <div>
                <span class="processing-time time-moderate">8</span>
                <span class="time-unit">weeks</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill moderate" style="width: 70%"></div>
                </div>
                <span class="progress-label">80% processed within 8 weeks</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Work Permit (Employer-specific)</span>
                <span class="visa-code">IMM 1295 - LMIA Required</span>
            </div>
            <div>
                <span class="processing-time time-moderate">12</span>
                <span class="time-unit">weeks</span>
            </div>
            <span class="status-badge status-delayed"><i class="bi bi-exclamation-circle"></i> Delays</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill moderate" style="width: 55%"></div>
                </div>
                <span class="progress-label">LMIA processing adds 2-4 weeks</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Open Work Permit (PGWP)</span>
                <span class="visa-code">Post-Graduation Work Permit</span>
            </div>
            <div>
                <span class="processing-time time-moderate">80</span>
                <span class="time-unit">days</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill moderate" style="width: 65%"></div>
                </div>
                <span class="progress-label">80% processed within 80 days</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Visitor Record Extension</span>
                <span class="visa-code">IMM 5708 - Inside Canada</span>
            </div>
            <div>
                <span class="processing-time time-slow">120</span>
                <span class="time-unit">days</span>
            </div>
            <span class="status-badge status-backlog"><i class="bi bi-x-circle"></i> Backlog</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill slow" style="width: 40%"></div>
                </div>
                <span class="progress-label">Significant processing delays</span>
            </div>
        </div>
    </div>
</div>

<!-- Family Sponsorship Section -->
<div class="timeline-container category-section" data-category="family all">
    <div class="timeline-header">
        <i style="background: linear-gradient(135deg, #E31837, #FF6B6B);" class="bi bi-people-fill"></i>
        <h3>Family Sponsorship</h3>
    </div>
    <div class="timeline-table">
        <div class="timeline-row header">
            <span>Application Type</span>
            <span>Processing Time</span>
            <span>Status</span>
            <span>Progress</span>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Spouse/Partner (Inside Canada)</span>
                <span class="visa-code">IMM 1344 - Inland Sponsorship</span>
            </div>
            <div>
                <span class="processing-time time-moderate">12</span>
                <span class="time-unit">months</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill moderate" style="width: 70%"></div>
                </div>
                <span class="progress-label">80% processed within 12 months</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Spouse/Partner (Outside Canada)</span>
                <span class="visa-code">IMM 1344 - Outland Sponsorship</span>
            </div>
            <div>
                <span class="processing-time time-moderate">12</span>
                <span class="time-unit">months</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill moderate" style="width: 70%"></div>
                </div>
                <span class="progress-label">80% processed within 12 months</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Parents & Grandparents (PGP)</span>
                <span class="visa-code">IMM 1344 - PGP Sponsorship</span>
            </div>
            <div>
                <span class="processing-time time-slow">24</span>
                <span class="time-unit">months</span>
            </div>
            <span class="status-badge status-backlog"><i class="bi bi-x-circle"></i> Backlog</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill slow" style="width: 45%"></div>
                </div>
                <span class="progress-label">Limited annual intake - lottery system</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Super Visa (Parents/Grandparents)</span>
                <span class="visa-code">IMM 5257 - Super Visa</span>
            </div>
            <div>
                <span class="processing-time time-moderate">60</span>
                <span class="time-unit">days</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill moderate" style="width: 75%"></div>
                </div>
                <span class="progress-label">Faster alternative to PGP</span>
            </div>
        </div>
    </div>
</div>

<!-- PNP Section -->
<div class="timeline-container category-section" data-category="pnp all">
    <div class="timeline-header">
        <i style="background: linear-gradient(135deg, #10B981, #34D399);" class="bi bi-geo-alt-fill"></i>
        <h3>Provincial Nominee Programs (PNP)</h3>
    </div>
    <div class="timeline-table">
        <div class="timeline-row header">
            <span>Application Type</span>
            <span>Processing Time</span>
            <span>Status</span>
            <span>Progress</span>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">PNP (Express Entry Stream)</span>
                <span class="visa-code">Enhanced Nomination - EE Linked</span>
            </div>
            <div>
                <span class="processing-time time-fast">6</span>
                <span class="time-unit">months</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill fast" style="width: 85%"></div>
                </div>
                <span class="progress-label">Processed with Express Entry</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">PNP (Base/Paper-based)</span>
                <span class="visa-code">Non-EE Provincial Nomination</span>
            </div>
            <div>
                <span class="processing-time time-slow">18</span>
                <span class="time-unit">months</span>
            </div>
            <span class="status-badge status-delayed"><i class="bi bi-exclamation-circle"></i> Delays</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill slow" style="width: 50%"></div>
                </div>
                <span class="progress-label">Paper-based processing slower</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Ontario PNP (OINP)</span>
                <span class="visa-code">Ontario Immigrant Nominee Program</span>
            </div>
            <div>
                <span class="processing-time time-moderate">3-6</span>
                <span class="time-unit">months</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill moderate" style="width: 70%"></div>
                </div>
                <span class="progress-label">Provincial nomination stage</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">BC PNP</span>
                <span class="visa-code">British Columbia Provincial Nominee</span>
            </div>
            <div>
                <span class="processing-time time-moderate">2-4</span>
                <span class="time-unit">months</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill fast" style="width: 80%"></div>
                </div>
                <span class="progress-label">Provincial nomination stage</span>
            </div>
        </div>
        <div class="timeline-row">
            <div class="visa-type">
                <span class="visa-name">Alberta PNP (AAIP)</span>
                <span class="visa-code">Alberta Advantage Immigration Program</span>
            </div>
            <div>
                <span class="processing-time time-moderate">3-5</span>
                <span class="time-unit">months</span>
            </div>
            <span class="status-badge status-normal"><i class="bi bi-check-circle"></i> On Track</span>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill moderate" style="width: 75%"></div>
                </div>
                <span class="progress-label">Provincial nomination stage</span>
            </div>
        </div>
    </div>
</div>

<!-- Country-Specific Processing Times -->
<div class="country-section">
    <h2 class="section-title">
        <i class="bi bi-globe2"></i>
        Processing Times by Country
    </h2>
    <p class="section-description">
        Processing times vary significantly based on your country of residence. Select a region or view all countries below.
    </p>

    <div class="country-filter">
        <button class="country-filter-btn active" onclick="filterCountries('all')">All Countries</button>
        <button class="country-filter-btn" onclick="filterCountries('asia')">Asia</button>
        <button class="country-filter-btn" onclick="filterCountries('americas')">Americas</button>
        <button class="country-filter-btn" onclick="filterCountries('europe')">Europe</button>
        <button class="country-filter-btn" onclick="filterCountries('africa')">Africa</button>
        <button class="country-filter-btn" onclick="filterCountries('oceania')">Oceania</button>
    </div>

    <div class="country-grid">
        <!-- India -->
        <div class="country-card" data-region="asia">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡®ðŸ‡³</span>
                <div>
                    <div class="country-name">India</div>
                    <div class="country-region">South Asia</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-slow">67 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-moderate">9 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-slow">18 weeks</span>
                </div>
            </div>
        </div>

        <!-- China -->
        <div class="country-card" data-region="asia">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡¨ðŸ‡³</span>
                <div>
                    <div class="country-name">China</div>
                    <div class="country-region">East Asia</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-moderate">38 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-moderate">7 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-moderate">14 weeks</span>
                </div>
            </div>
        </div>

        <!-- Philippines -->
        <div class="country-card" data-region="asia">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡µðŸ‡­</span>
                <div>
                    <div class="country-name">Philippines</div>
                    <div class="country-region">Southeast Asia</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-slow">72 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-moderate">10 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-slow">16 weeks</span>
                </div>
            </div>
        </div>

        <!-- Pakistan -->
        <div class="country-card" data-region="asia">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡µðŸ‡°</span>
                <div>
                    <div class="country-name">Pakistan</div>
                    <div class="country-region">South Asia</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-slow">89 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-slow">12 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-slow">20 weeks</span>
                </div>
            </div>
        </div>

        <!-- Nigeria -->
        <div class="country-card" data-region="africa">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡³ðŸ‡¬</span>
                <div>
                    <div class="country-name">Nigeria</div>
                    <div class="country-region">West Africa</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-slow">95 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-slow">14 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-slow">22 weeks</span>
                </div>
            </div>
        </div>

        <!-- USA -->
        <div class="country-card" data-region="americas">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡ºðŸ‡¸</span>
                <div>
                    <div class="country-name">United States</div>
                    <div class="country-region">North America</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-fast">14 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-fast">3 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-fast">6 weeks</span>
                </div>
            </div>
        </div>

        <!-- Mexico -->
        <div class="country-card" data-region="americas">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡²ðŸ‡½</span>
                <div>
                    <div class="country-name">Mexico</div>
                    <div class="country-region">North America</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-fast">21 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-fast">4 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-moderate">10 weeks</span>
                </div>
            </div>
        </div>

        <!-- Brazil -->
        <div class="country-card" data-region="americas">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡§ðŸ‡·</span>
                <div>
                    <div class="country-name">Brazil</div>
                    <div class="country-region">South America</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-moderate">28 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-moderate">6 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-moderate">12 weeks</span>
                </div>
            </div>
        </div>

        <!-- UK -->
        <div class="country-card" data-region="europe">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡¬ðŸ‡§</span>
                <div>
                    <div class="country-name">United Kingdom</div>
                    <div class="country-region">Europe</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-fast">12 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-fast">3 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-fast">5 weeks</span>
                </div>
            </div>
        </div>

        <!-- France -->
        <div class="country-card" data-region="europe">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡«ðŸ‡·</span>
                <div>
                    <div class="country-name">France</div>
                    <div class="country-region">Europe</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-fast">10 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-fast">3 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-fast">5 weeks</span>
                </div>
            </div>
        </div>

        <!-- Germany -->
        <div class="country-card" data-region="europe">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡©ðŸ‡ª</span>
                <div>
                    <div class="country-name">Germany</div>
                    <div class="country-region">Europe</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-fast">11 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-fast">3 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-fast">5 weeks</span>
                </div>
            </div>
        </div>

        <!-- Australia -->
        <div class="country-card" data-region="oceania">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡¦ðŸ‡º</span>
                <div>
                    <div class="country-name">Australia</div>
                    <div class="country-region">Oceania</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-fast">9 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-fast">2 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-fast">4 weeks</span>
                </div>
            </div>
        </div>

        <!-- UAE -->
        <div class="country-card" data-region="asia">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡¦ðŸ‡ª</span>
                <div>
                    <div class="country-name">UAE</div>
                    <div class="country-region">Middle East</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-moderate">25 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-fast">4 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-moderate">8 weeks</span>
                </div>
            </div>
        </div>

        <!-- South Korea -->
        <div class="country-card" data-region="asia">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡°ðŸ‡·</span>
                <div>
                    <div class="country-name">South Korea</div>
                    <div class="country-region">East Asia</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-fast">15 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-fast">4 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-moderate">7 weeks</span>
                </div>
            </div>
        </div>

        <!-- South Africa -->
        <div class="country-card" data-region="africa">
            <div class="country-card-header">
                <span class="country-flag">ðŸ‡¿ðŸ‡¦</span>
                <div>
                    <div class="country-name">South Africa</div>
                    <div class="country-region">Southern Africa</div>
                </div>
            </div>
            <div class="country-card-body">
                <div class="visa-time-row">
                    <span class="visa-time-label">Visitor Visa</span>
                    <span class="visa-time-value time-moderate">42 days</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Study Permit</span>
                    <span class="visa-time-value time-moderate">8 weeks</span>
                </div>
                <div class="visa-time-row">
                    <span class="visa-time-label">Work Permit</span>
                    <span class="visa-time-value time-moderate">14 weeks</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Immigration Statistics Section -->
<div class="stats-section">
    <h2 class="section-title">
        <i class="bi bi-bar-chart-fill"></i>
        Immigration Statistics 2025
    </h2>
    <p class="section-description">
        Key figures and targets for Canadian immigration programs
    </p>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">485,000</div>
            <div class="stat-label">Immigration Target</div>
            <div class="stat-sublabel">Permanent Residents for 2025</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">110,770</div>
            <div class="stat-label">Express Entry Target</div>
            <div class="stat-sublabel">ITAs to be issued in 2025</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">117,500</div>
            <div class="stat-label">PNP Target</div>
            <div class="stat-sublabel">Provincial Nominees for 2025</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">82,000</div>
            <div class="stat-label">Family Class</div>
            <div class="stat-sublabel">Sponsorship admissions target</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">2.5M+</div>
            <div class="stat-label">Active Profiles</div>
            <div class="stat-sublabel">In Express Entry pool</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">~500</div>
            <div class="stat-label">CRS Cutoff</div>
            <div class="stat-sublabel">Average for no-program draws</div>
        </div>
    </div>
</div>

<!-- Application Fees Section -->
<div class="fees-section">
    <h2 class="section-title">
        <i class="bi bi-cash-coin"></i>
        Application Fees (CAD)
    </h2>
    <p class="section-description">
        Current government fees for immigration applications
    </p>

    <div class="fees-table">
        <div class="fees-header">
            <i class="bi bi-currency-dollar"></i>
            <h3>Immigration Application Fees</h3>
        </div>
        <div class="fees-row header">
            <span>Application Type</span>
            <span>Principal Applicant</span>
            <span>Spouse/Child</span>
        </div>
        <div class="fees-row">
            <div class="visa-type">
                <span class="visa-name">Permanent Residence (Express Entry)</span>
                <span class="visa-code">Includes processing fee + RPRF</span>
            </div>
            <span class="fee-amount">$1,365</span>
            <span class="fee-amount">$1,365 / $230</span>
        </div>
        <div class="fees-row">
            <div class="visa-type">
                <span class="visa-name">Visitor Visa (TRV)</span>
                <span class="visa-code">Single or multiple entry</span>
            </div>
            <span class="fee-amount">$100</span>
            <span class="fee-type">Family max: $500</span>
        </div>
        <div class="fees-row">
            <div class="visa-type">
                <span class="visa-name">Study Permit</span>
                <span class="visa-code">Including student visa</span>
            </div>
            <span class="fee-amount">$150</span>
            <span class="fee-type">-</span>
        </div>
        <div class="fees-row">
            <div class="visa-type">
                <span class="visa-name">Work Permit</span>
                <span class="visa-code">LMIA-based or LMIA-exempt</span>
            </div>
            <span class="fee-amount">$155</span>
            <span class="fee-type">-</span>
        </div>
        <div class="fees-row">
            <div class="visa-type">
                <span class="visa-name">Open Work Permit</span>
                <span class="visa-code">Including PGWP, Bridging OWP</span>
            </div>
            <span class="fee-amount">$255</span>
            <span class="fee-type">$100 holder fee</span>
        </div>
        <div class="fees-row">
            <div class="visa-type">
                <span class="visa-name">Spousal Sponsorship</span>
                <span class="visa-code">Sponsorship + PR application</span>
            </div>
            <span class="fee-amount">$1,080</span>
            <span class="fee-type">-</span>
        </div>
        <div class="fees-row">
            <div class="visa-type">
                <span class="visa-name">Super Visa</span>
                <span class="visa-code">Parents/Grandparents</span>
            </div>
            <span class="fee-amount">$100</span>
            <span class="fee-type">-</span>
        </div>
        <div class="fees-row">
            <div class="visa-type">
                <span class="visa-name">Biometrics</span>
                <span class="visa-code">Fingerprints & photo</span>
            </div>
            <span class="fee-amount">$85</span>
            <span class="fee-type">Family max: $170</span>
        </div>
    </div>
</div>

<!-- Key Dates & Deadlines Section -->
<div class="dates-section">
    <h2 class="section-title">
        <i class="bi bi-calendar-event"></i>
        Important Dates & Deadlines
    </h2>
    <p class="section-description">
        Key immigration dates and document validity periods
    </p>

    <div class="key-dates-grid">
        <div class="date-card">
            <div class="date-card-header">
                <div class="date-icon" style="background: linear-gradient(135deg, #6366F1, #8B5CF6);">
                    <i class="bi bi-lightning"></i>
                </div>
                <h4>Express Entry Timelines</h4>
            </div>
            <ul class="date-list">
                <li>
                    <span class="date-label">Profile Validity</span>
                    <span class="date-value">12 months</span>
                </li>
                <li>
                    <span class="date-label">ITA Response Time</span>
                    <span class="date-value">60 days</span>
                </li>
                <li>
                    <span class="date-label">PR Card Validity</span>
                    <span class="date-value">5 years</span>
                </li>
                <li>
                    <span class="date-label">COPR Validity</span>
                    <span class="date-value">Until expiry date</span>
                </li>
            </ul>
        </div>

        <div class="date-card">
            <div class="date-card-header">
                <div class="date-icon" style="background: linear-gradient(135deg, #10B981, #34D399);">
                    <i class="bi bi-file-text"></i>
                </div>
                <h4>Document Validity</h4>
            </div>
            <ul class="date-list">
                <li>
                    <span class="date-label">IELTS/CELPIP</span>
                    <span class="date-value">2 years</span>
                </li>
                <li>
                    <span class="date-label">TEF/TCF</span>
                    <span class="date-value">2 years</span>
                </li>
                <li>
                    <span class="date-label">ECA Report</span>
                    <span class="date-value">5 years</span>
                </li>
                <li>
                    <span class="date-label">Police Certificate</span>
                    <span class="date-value">Varies (6-12 mo)</span>
                </li>
                <li>
                    <span class="date-label">Medical Exam</span>
                    <span class="date-value">12 months</span>
                </li>
            </ul>
        </div>

        <div class="date-card">
            <div class="date-card-header">
                <div class="date-icon" style="background: linear-gradient(135deg, #F59E0B, #FBBF24);">
                    <i class="bi bi-clock-history"></i>
                </div>
                <h4>Status & Extensions</h4>
            </div>
            <ul class="date-list">
                <li>
                    <span class="date-label">Visitor Status</span>
                    <span class="date-value">6 months typical</span>
                </li>
                <li>
                    <span class="date-label">Super Visa Stay</span>
                    <span class="date-value">5 years per visit</span>
                </li>
                <li>
                    <span class="date-label">PGWP Duration</span>
                    <span class="date-value">8 mo - 3 years</span>
                </li>
                <li>
                    <span class="date-label">Implied Status</span>
                    <span class="date-value">Until decision</span>
                </li>
            </ul>
        </div>

        <div class="date-card">
            <div class="date-card-header">
                <div class="date-icon" style="background: linear-gradient(135deg, #E31837, #FF6B6B);">
                    <i class="bi bi-exclamation-triangle"></i>
                </div>
                <h4>Critical Deadlines</h4>
            </div>
            <ul class="date-list">
                <li>
                    <span class="date-label">Status Restoration</span>
                    <span class="date-value">90 days</span>
                </li>
                <li>
                    <span class="date-label">Citizenship Residency</span>
                    <span class="date-value">1,095 days/5 yrs</span>
                </li>
                <li>
                    <span class="date-label">PR Residency Obligation</span>
                    <span class="date-value">730 days/5 yrs</span>
                </li>
                <li>
                    <span class="date-label">eTA Validity</span>
                    <span class="date-value">5 years or passport</span>
                </li>
            </ul>
        </div>
    </div>
</div>

<!-- Info Cards -->
    <div class="info-card">
        <div class="info-card-header">
            <div class="info-card-icon" style="background: rgba(16, 185, 129, 0.15); color: #059669;">
                <i class="bi bi-speedometer2"></i>
            </div>
            <h4>What Affects Processing Time?</h4>
        </div>
        <p>Processing times depend on application completeness, document quality, medical/security checks, and current application volumes. Category-based draws may have different timelines.</p>
    </div>
    <div class="info-card">
        <div class="info-card-header">
            <div class="info-card-icon" style="background: rgba(99, 102, 241, 0.15); color: #6366F1;">
                <i class="bi bi-hourglass-split"></i>
            </div>
            <h4>Service Standards vs Reality</h4>
        </div>
        <p>IRCC aims to process 80% of applications within the stated timeframe. Complex cases, additional document requests, or background checks can extend processing significantly.</p>
    </div>
    <div class="info-card">
        <div class="info-card-header">
            <div class="info-card-icon" style="background: rgba(245, 158, 11, 0.15); color: #D97706;">
                <i class="bi bi-bell"></i>
            </div>
            <h4>Track Your Application</h4>
        </div>
        <p>Check your application status online through your IRCC account. You'll receive email notifications for updates, document requests, and final decisions.</p>
    </div>
</div>

<!-- Legend -->
<div class="legend">
    <div class="legend-item">
        <span class="legend-dot fast"></span>
        <span>Fast (Within Target)</span>
    </div>
    <div class="legend-item">
        <span class="legend-dot moderate"></span>
        <span>Moderate (Near Target)</span>
    </div>
    <div class="legend-item">
        <span class="legend-dot slow"></span>
        <span>Slow (Backlog/Delays)</span>
    </div>
</div>

<!-- Disclaimer -->
<div class="times-disclaimer">
    <i class="bi bi-exclamation-triangle-fill"></i>
    <strong>Disclaimer:</strong> Processing times shown are estimates based on IRCC published data and may vary. Times are subject to change without notice. Always check the official IRCC website for the most current processing times. Individual cases may take longer due to additional verification requirements.
</div>
{% endblock %}

{% block extra_js %}
<script>
function showCategory(category) {
    // Update tab states
    document.querySelectorAll('.category-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    event.target.closest('.category-tab').classList.add('active');

    // Show/hide sections
    document.querySelectorAll('.category-section').forEach(section => {
        const categories = section.dataset.category.split(' ');
        if (categories.includes(category)) {
            section.style.display = 'block';
        } else {
            section.style.display = 'none';
        }
    });
}

function filterCountries(region) {
    // Update filter button states
    document.querySelectorAll('.country-filter-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');

    // Show/hide country cards
    document.querySelectorAll('.country-card').forEach(card => {
        if (region === 'all' || card.dataset.region === region) {
            card.style.display = 'block';
        } else {
            card.style.display = 'none';
        }
    });
}

// Initialize - show all
document.addEventListener('DOMContentLoaded', function() {
    showCategory('all');

    // Fetch live processing times data
    fetchLiveProcessingTimes();
});

// Fetch live data from IRCC (via our API)
async function fetchLiveProcessingTimes() {
    try {
        const response = await fetch('/api/processing-times');
        if (response.ok) {
            const data = await response.json();
            if (data.countries) {
                updateCountryCards(data.countries);
            }
            if (data.last_updated) {
                document.querySelector('.last-updated-text span').innerHTML =
                    `Last updated: <strong>${data.last_updated}</strong> - Based on IRCC official data`;
            }
        }
    } catch (error) {
        console.log('Using cached processing times data');
    }
}

function updateCountryCards(countries) {
    for (const [countryName, times] of Object.entries(countries)) {
        const cards = document.querySelectorAll('.country-card');
        cards.forEach(card => {
            const nameEl = card.querySelector('.country-name');
            if (nameEl && nameEl.textContent.toLowerCase() === countryName.toLowerCase()) {
                const rows = card.querySelectorAll('.visa-time-row');
                rows.forEach(row => {
                    const label = row.querySelector('.visa-time-label');
                    const value = row.querySelector('.visa-time-value');
                    if (label && value) {
                        const visaType = label.textContent.toLowerCase();
                        if (visaType.includes('visitor') && times.visitor) {
                            value.textContent = times.visitor;
                            updateTimeClass(value, times.visitor);
                        } else if (visaType.includes('study') && times.study) {
                            value.textContent = times.study;
                            updateTimeClass(value, times.study);
                        } else if (visaType.includes('work') && times.work) {
                            value.textContent = times.work;
                            updateTimeClass(value, times.work);
                        }
                    }
                });
            }
        });
    }
}

function updateTimeClass(element, timeStr) {
    element.classList.remove('time-fast', 'time-moderate', 'time-slow');
    const days = parseInt(timeStr) || 0;
    if (days <= 30) {
        element.classList.add('time-fast');
    } else if (days <= 60) {
        element.classList.add('time-moderate');
    } else {
        element.classList.add('time-slow');
    }
}
</script>
{% endblock %}
